INSERT INTO widgetcatalog(code, titles, parameters, plugincode, parenttypecode, defaultconfig, locked)
    VALUES ('jpcalendar_calendar', '<?xml version="1.0" encoding="UTF-8"?>
<properties>
<property key="en">Calendar</property>
<property key="it">Calendario</property>
</properties>', NULL, 'jpcalendar', NULL, NULL, 1);


INSERT INTO widgetcatalog(code, titles, parameters, plugincode, parenttypecode, defaultconfig, locked)
    VALUES ('jpcalendar_dailyEvents', '<?xml version="1.0" encoding="UTF-8"?>
<properties>
<property key="en">Events of the Day</property>
<property key="it">Eventi del giorno</property>
</properties>', NULL, 'jpcalendar', NULL, NULL, 1);


INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_SEARCH_GO' , 'en', 'Search');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_SEARCH_GO' , 'it', 'Ricerca');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_PREVIOUS' , 'en', 'Previuos Month');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_PREVIOUS' , 'it', 'Mese Precedente');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_NEXT' , 'en', 'Next Month');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_NEXT' , 'it', 'Prossimo Mese');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_CHOOSE' , 'en', 'Select Month');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_CHOOSE' , 'it', 'Seleziona Mese');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_JANUARY' , 'en', 'January');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_JANUARY' , 'it', 'Gennaio');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_FEBRUARY' , 'en', 'February');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_FEBRUARY' , 'it', 'Febbraio');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_MARCH' , 'en', 'March');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_MARCH' , 'it', 'Marzo');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_APRIL' , 'en', 'April');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_APRIL' , 'it', 'Aprile');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_MAY' , 'en', 'May');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_MAY' , 'it', 'Maggio');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_JUNE' , 'en', 'June');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_JUNE' , 'it', 'Giugno');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_JULY' , 'en', 'July');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_JULY' , 'it', 'Luglio');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_AUGUST' , 'en', 'August');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_AUGUST' , 'it', 'Agosto');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_SEPTEMBER' , 'en', 'September');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_SEPTEMBER' , 'it', 'Settembre');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_OCTOBER' , 'en', 'October');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_OCTOBER' , 'it', 'Ottobre');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_NOVEMBER' , 'en', 'November');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_NOVEMBER' , 'it', 'Novembre');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_DECEMBER' , 'en', 'December');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_MONTH_DECEMBER' , 'it', 'Dicembre');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_YEAR_CHOOSE' , 'en', 'Select Year');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_YEAR_CHOOSE' , 'it', 'Seleziona Anno');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_SUMMARY' , 'en', 'Event calendar');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_SUMMARY' , 'it', 'Calendario eventi');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_CAPTION' , 'en', 'Descr event calendar');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_CAPTION' , 'it', 'Calendario eventi descr');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_NUMBER' , 'en', 'week num');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_NUMBER' , 'it', 'num sett');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_MONDAY' , 'en', 'mon');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_MONDAY' , 'it', 'lun');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_TUESDAY' , 'en', 'tue');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_TUESDAY' , 'it', 'mar');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_WEDNESDAY' , 'en', 'wed');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_WEDNESDAY' , 'it', 'mer');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_THURSDAY' , 'en', 'thu');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_THURSDAY' , 'it', 'gio');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_FRIDAY' , 'en', 'fri');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_FRIDAY' , 'it', 'ven');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_SATURDAY' , 'en', 'sat');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_SATURDAY' , 'it', 'sab');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_SUNDAY' , 'en', 'sun');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_WEEK_SUNDAY' , 'it', 'dom');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_EVENTS_TITLE' , 'en', 'Events');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_EVENTS_TITLE' , 'it', 'Eventi');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_EVENTS_PREVIOUS' , 'en', 'previous events');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_EVENTS_PREVIOUS' , 'it', 'precedenti eventi');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_EVENTS_NEXT' , 'en', 'next events');
INSERT INTO localstrings(keycode, langcode, stringvalue) VALUES ('jpcalendar_EVENTS_NEXT' , 'it', 'prossimi eventi');




INSERT INTO guifragment (code, widgettypecode, plugincode, gui, defaultgui, locked) VALUES ('jpcalendar_calendar', 'jpcalendar_calendar', 'jpcalendar', NULL, '<#assign cal=JspTaglibs["/jpcalendar-aps-core"]>
<#assign wp=JspTaglibs["/aps-core"]>

<@cal.calendar groupName="jpcalendarCal" datePattern="yyyyMMdd" />
<#assign nowTime = .now>
<#assign today = nowTime?string["yyyyMMdd"]>

<@wp.pageWithWidget var="jpcalendar_dailyEventsVar" widgetTypeCode="jpcalendar_dailyEvents" />
<div class="row-fluid">
	<div class="span12">
		<form class="form-inline text-center" action="<@wp.url />" method="post">
			<div class="input-prepend input-append">
				<a href="<@wp.url>
							<@wp.parameter name="month">${prevMonth}</@wp.parameter>
							<@wp.parameter name="year">${prevYear}</@wp.parameter>
						</@wp.url>"
					title="<@wp.i18n key="jpcalendar_MONTH_PREVIOUS" />"
					class="add-on">
						<span class="noscreen sr-only"><@wp.i18n key="jpcalendar_MONTH_PREVIOUS" /></span>
						<span class="icon icon-step-backward"></span>
				</a>
				<label class="noscreen sr-only">
					<@wp.i18n key="jpcalendar_MONTH_CHOOSE" />
				</label>
				<select name="month">
					<option <#if (selectedMonth??) && (selectedMonth == "0")>selected="selected"</#if> value="0">
						<@wp.i18n key="jpcalendar_MONTH_JANUARY" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "1")>selected="selected"</#if> value="1">
						<@wp.i18n key="jpcalendar_MONTH_FEBRUARY" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "2")>selected="selected"</#if> value="2">
						<@wp.i18n key="jpcalendar_MONTH_MARCH" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "3")>selected="selected"</#if> value="3">
						<@wp.i18n key="jpcalendar_MONTH_APRIL" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "4")>selected="selected"</#if> value="4">
						<@wp.i18n key="jpcalendar_MONTH_MAY" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "5")>selected="selected"</#if> value="5">
						<@wp.i18n key="jpcalendar_MONTH_JUNE" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "6")>selected="selected"</#if> value="6">
						<@wp.i18n key="jpcalendar_MONTH_JULY" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "7")>selected="selected"</#if> value="7">
						<@wp.i18n key="jpcalendar_MONTH_AUGUST" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "8")>selected="selected"</#if> value="8">
						<@wp.i18n key="jpcalendar_MONTH_SEPTEMBER" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "9")>selected="selected"</#if> value="9">
						<@wp.i18n key="jpcalendar_MONTH_OCTOBER" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "10")>selected="selected"</#if> value="10">
						<@wp.i18n key="jpcalendar_MONTH_NOVEMBER" />
					</option>
					<option <#if (selectedMonth??) && (selectedMonth == "11")>selected="selected"</#if> value="11">
						<@wp.i18n key="jpcalendar_MONTH_DECEMBER" />
					</option>
				</select>
				<a href="<@wp.url>
							<@wp.parameter name="month">${nextMonth}</@wp.parameter>
							<@wp.parameter name="year">${nextYear}</@wp.parameter>
						</@wp.url>" title="<@wp.i18n key="jpcalendar_MONTH_NEXT" />" class="add-on">
						<span class="noscreen sr-only"><@wp.i18n key="jpcalendar_MONTH_NEXT" /></span>
						<span class="icon icon-step-forward"></span>
				</a>
			</div>
			&ensp;
			<div class="input-append">
				<label class="noscreen sr-only">
					<@wp.i18n key="jpcalendar_YEAR_CHOOSE" />
				</label>
				<select name="year">
					<#list yearsForSelect as yearOpt>
						<option <#if (selectedYear??) && (selectedYear == yearOpt?c)>selected="selected"</#if> value="${yearOpt?c}">${yearOpt?c}</option>
					</#list>
				</select>
				<button title="<@wp.i18n key="jpcalendar_SEARCH_GO" />" type="submit" class="btn btn-primary">
					<span class="noscreen sr-only"><@wp.i18n key="jpcalendar_SEARCH_GO" /></span>
					<span class="icon icon-search"></span>
				</button>
			</div>
		</form>
	</div>
</div>
<div class="row-fluid">
	<div class="span12">
		<table class="table table-hover" summary="<@wp.i18n key="jpcalendar_SUMMARY" />">
			<caption class="sr-only noscreen"><@wp.i18n key="jpcalendar_CAPTION" /></caption>
			<tr>
				<th scope="col"><@wp.i18n key="jpcalendar_WEEK_NUMBER" /></th>
				<th scope="col"><@wp.i18n key="jpcalendar_WEEK_MONDAY" /></th>
				<th scope="col"><@wp.i18n key="jpcalendar_WEEK_TUESDAY" /></th>
				<th scope="col"><@wp.i18n key="jpcalendar_WEEK_WEDNESDAY" /></th>
				<th scope="col"><@wp.i18n key="jpcalendar_WEEK_THURSDAY" /></th>
				<th scope="col"><@wp.i18n key="jpcalendar_WEEK_FRIDAY" /></th>
				<th scope="col"><@wp.i18n key="jpcalendar_WEEK_SATURDAY" /></th>
				<th scope="col"><@wp.i18n key="jpcalendar_WEEK_SUNDAY" /></th>
			</tr>
			<#list jpcalendarCal.calendar as week>
				<tr>
					<th scope="row">
						${jpcalendarCal.weeks[week_index]}
					</th>
					<#list week as dayItem>
						<#if (dayItem??) && (dayItem?has_content) >
						<td class="text-center <#if (dayItem.formattedDate == today)> today text-info </#if><#if (dayItem.hasEvents)> hasEvents </#if>">
							<#if (dayItem.hasEvents) >
								<#if (jpcalendar_dailyEventsVar??)>
								<a class="badge badge-<#if (dayItem.formattedDate == today)>warning<#else>info</#if>"
									href="<@wp.url page="${jpcalendar_dailyEventsVar.code}" >
											<@wp.parameter name="selectedDate" >${dayItem.formattedDate}</@wp.parameter></@wp.url>">${dayItem.day}</a>
								<#else>
								${dayItem.day}
								</#if>
							<#elseif (dayItem.formattedDate == today)>
							<span class="badge">${dayItem.day}</span>
							<#else>
							${dayItem.day}
							</#if>
						</td>
						<#else>
						<td></td>
						</#if>
					</#list>
				</tr>
			</#list>
		</table>
	</div>
</div>', 1);
INSERT INTO guifragment (code, widgettypecode, plugincode, gui, defaultgui, locked) VALUES ('jpcalendar_dailyEvents', 'jpcalendar_dailyEvents', 'jpcalendar', NULL, '<#assign wp=JspTaglibs["/aps-core"]>
<#assign jacms=JspTaglibs["/jacms-aps-core"]>
<#assign cal=JspTaglibs["/jpcalendar-aps-core"]>

<#if RequestParameters.selectedDate ??>
   <#assign selectedDateParam = RequestParameters.selectedDate >
</#if>

<h1>
	<@wp.i18n key="jpcalendar_EVENTS_TITLE" />
	<#if (selectedDateParam??) >
	<@wp.info key="currentLang" var="currentLang" />
	<#setting locale=currentLang>
	: <#assign selectedDate = selectedDateParam?date("yyyyMMdd")>${selectedDate?string["dd MMMM yyyy"]}
	</#if>
</h1>
<@cal.eventsOfDay listName="contentList" />
<#if (contentList??) && (contentList?has_content) && (contentList?size > 0)>
	<@wp.pager listName="contentList" objectName="groupContent" pagerIdFromFrame=true max=10 >
		<@wp.freemarkerTemplateParameter var="group" valueName="groupContent" removeOnEndTag=true >
		<@wp.fragment code="default_pagerBlock" escapeXml=false />
		<#list contentList as contentId>
		<#if (contentId_index >= groupContent.begin) && (contentId_index <= groupContent.end)>
			<@jacms.content contentId="${contentId}" modelId="list" />
		</#if>
		</#list>
		<@wp.fragment code="default_pagerBlock" escapeXml=false />
		</@wp.freemarkerTemplateParameter>
	</@wp.pager>
</#if>
<#assign contentList="">', 1);

